<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8" />
<title>Auto Store</title>
<style>
body { font-family: Arial; padding: 20px; }
.grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(220px, 1fr)); gap: 20px; }
.card { border: 1px solid #ccc; padding: 10px; border-radius: 8px; }
img { width: 100%; border-radius: 6px; }
</style>
</head>
<body>
<h1>Printful Auto Store</h1>
<div id="products" class="grid"></div>


<script>
async function loadProducts() {
const res = await fetch("/.netlify/functions/printful?type=all_products");
const data = await res.json();


const container = document.getElementById("products");
container.innerHTML = "";


data.result.forEach(p => {
const div = document.createElement("div");
div.className = "card";
div.innerHTML = `
<img src="${p.thumbnail_url}" />
<h3>${p.title}</h3>
<p>${p.type_name}</p>
<button onclick="view(${p.id})">View</button>
`;
container.appendChild(div);
});
}


function view(id) {
location.href = `product.html?id=${id}`;
}


loadProducts();
</script>
</body>
</html>
